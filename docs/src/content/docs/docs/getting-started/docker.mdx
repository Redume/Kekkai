---
title: Docker
---

Docker Compose is the recommended method to run Kekkai in production. 
Below are the steps to deploy Kekkai with Docker Compose.

Kekkai requires Docker Compose version 2.x.

import { Steps, Code } from '@astrojs/starlight/components';

<Steps>
1. Preparing files
    ```
    git clone https://github.com/redume/Kekkai
    ```
    ```
    cd Kekkai
    ```

2. Change config files

    In .env, you need to specify your domain or ipv4 address
    <Code code='
    DOMAIN=example.com
    ' lang='txt' title='.env' />

    Write the path to your certificates in the .env config file.

    <Code code='
    SSL_CERT=/etc/nginx/ssl/privkey.pem
    SSL_CERT_KEY=/etc/nginx/ssl/privkey.pem
    ' lang='txt' title='.env' />

    <Code code=
    "
    database: 
    user: 'DATABASE_USERNAME'
    password: 'DATABASE_PASSWORD'
    host: 'DATABASE_HOST'
    name: 'DATABASE_NAME'
    port: 5432
    ...
    " lang='yaml' title='config.sample.yaml' />
    Fill in the data in the database item, as well as in the .env config


    <Code code='
    # Connection secret for postgres. You should change it to a random password
    # Please use only the characters `A-Za-z0-9`, without special characters or spaces

    POSTGRES_PASSWORD=my_password

    # If you do not know what you are doing, then you should not edit the values below
    ###################################################################################
    POSTGRES_DB=kekkai
    DB_HOST=postgres
    POSTGRES_USER=postgres
    ' lang='txt' title='.env.sample' />

    - Populate custom database information if necessary.
    - Consider changing `DB_PASSWORD` to a custom value. 
    Postgres is not publically exposed, 
    so this password is only used for - local authentication. 
    To avoid issues with Docker parsing this value, 
    it is best to use only the characters `A-Za-z0-9`.

3. Start the containers
    ```shell
    docker compose up -d
    ```

</Steps>